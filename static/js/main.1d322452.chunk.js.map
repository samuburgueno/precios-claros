{"version":3,"sources":["Scanner.js","index.js"],"names":["api","id_producto","concat","Scanner","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","setRef","webcam","state","codigo","getScreenshot","bind","assertThisInitialized","fetch","resp","status","json","data","setState","producto","dataUri","Quagga","decodeSingle","decoder","readers","locate","src","result","codeResult","obtengerProducto","code","error","scanImage","react_default","a","createElement","className","role","nombre","marca","precioMin","precioMax","react_webcam_default","style","backgroundColor","width","height","borderRadius","audio","ref","screenshotFormat","videoConstraints","facingMode","exact","type","onClick","React","Component","ReactDOM","render","Scanner_Scanner","document","getElementById"],"mappings":"4QAIMA,EAAM,SAACC,GACT,kFAAAC,OAAmFD,EAAnF,0RAGiBE,cACjB,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACfE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAmBVQ,OAAS,SAAAC,GACLR,EAAKQ,OAASA,GAlBdR,EAAKS,MAAQ,CACTC,QAAQ,GAGZV,EAAKW,cAAgBX,EAAKW,cAAcC,KAAnBX,OAAAY,EAAA,EAAAZ,CAAAD,IAPNA,wHAUIJ,2FACAkB,MAAMnB,EAAIC,cACT,OADdmB,UACGC,uCACcD,EAAKE,cAAlBC,SACNf,KAAKgB,SAAS,CACVC,SAAUF,yIASZG,GACNC,IAAOC,aAAa,CAChBC,QAAS,CACLC,QAAS,CAAC,eAEdC,QAAQ,EACRC,IAAKN,GACN,SAASO,GACLA,EAAOC,YACN1B,KAAK2B,iBAAiBF,EAAOC,WAAWE,MACxC5B,KAAKgB,SAAS,CACVT,OAAQkB,EAAOC,WAAWE,KAC1BC,OAAO,KAGX7B,KAAKgB,SAAS,CACVa,MAAO,sBAGjBpB,KAAKT,+CAIHA,KAAKK,OAAOG,gBACZR,KAAK8B,UAAU9B,KAAKK,OAAOG,iBAE3BR,KAAKgB,SAAS,CACVa,MAAO,0DAMf,OACIE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yBACXH,EAAAC,EAAAC,cAAA,gCACCjC,KAAKM,MAAMuB,OACRE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBAAqBC,KAAK,SAASnC,KAAKM,MAAMuB,OAGhE7B,KAAKM,MAAMC,QACRwB,EAAAC,EAAAC,cAAA,wBAAajC,KAAKM,MAAMC,QAG3BP,KAAKM,MAAMW,UACRc,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,UAAKjC,KAAKM,MAAMW,SAASA,SAASmB,QAClCL,EAAAC,EAAAC,cAAA,UAAKjC,KAAKM,MAAMW,SAASA,SAASoB,OAClCN,EAAAC,EAAAC,cAAA,+BAAoBjC,KAAKM,MAAMW,SAASA,SAASqB,WACjDP,EAAAC,EAAAC,cAAA,+BAAoBjC,KAAKM,MAAMW,SAASA,SAASsB,YAGzDR,EAAAC,EAAAC,cAACO,EAAAR,EAAD,CACIS,MAAO,CAACC,gBAAiB,OAAQC,MAAO,OAAQC,OAAQ,QAASC,aAAc,QAC/EC,OAAO,EACPC,IAAK/C,KAAKI,OACV4C,iBAAiB,aACjBC,iBAAkB,CACdN,MAAO,IACPC,OAAQ,IACRM,WAAY,CAAEC,MAAO,kBAG7BpB,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACfH,EAAAC,EAAAC,cAAA,UAAQmB,KAAK,SAASlB,UAAU,kBAAkBmB,QAASrD,KAAKQ,eAAhE,oBA1FqB8C,IAAMC,WCD3CC,IAASC,OAAO1B,EAAAC,EAAAC,cAACyB,EAAD,MAAaC,SAASC,eAAe","file":"static/js/main.1d322452.chunk.js","sourcesContent":["import React from 'react';\nimport Quagga from 'quagga'\nimport Webcam from \"react-webcam\";\n\nconst api = (id_producto) => {\n    return `https://d3e6htiiul5ek9.cloudfront.net/prod/producto?limit=30&id_producto=${id_producto}&array_sucursales=22-1-6,19-1-03296,12-1-97,10-1-268,22-1-16,19-1-00973,12-1-99,22-1-20,19-1-00812,22-1-3,22-1-24,24-1-292,22-1-18,22-1-17,10-1-32,22-1-1,22-1-31,12-1-95,19-1-00983,12-1-165,10-1-33,22-1-26,10-1-41,9-3-5218,19-1-00989,19-1-00959,22-1-5,22-1-11,12-1-96,16-1-1202`\n}\n\nexport default class Scanner extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            codigo: false\n        }\n\n        this.getScreenshot = this.getScreenshot.bind(this)\n    }\n\n    async obtengerProducto(id_producto) {\n        const resp = await fetch(api(id_producto))\n        if (resp.status === 200) {\n            const data = await resp.json()\n            this.setState({\n                producto: data\n            });\n        }\n    }\n\n    setRef = webcam => {\n        this.webcam = webcam;\n    };\n\n    scanImage(dataUri) {\n        Quagga.decodeSingle({\n            decoder: {\n                readers: [\"ean_reader\"],\n            },\n            locate: true,\n            src: dataUri\n        }, function(result) {\n            if(result.codeResult) {\n                this.obtengerProducto(result.codeResult.code)\n                this.setState({\n                    codigo: result.codeResult.code,\n                    error: false\n                });\n            } else {\n                this.setState({\n                    error: \"Error de lectura\"\n                });\n            }\n        }.bind(this));\n    }\n\n    getScreenshot() {\n        if (this.webcam.getScreenshot()) {\n            this.scanImage(this.webcam.getScreenshot())\n        } else {\n            this.setState({\n                error: \"No se puede capturar\"\n            });\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"container text-center\">\n                <h2>Escanear productos</h2>\n                {this.state.error &&\n                    <div className=\"alert alert-danger\" role=\"alert\">{this.state.error}</div>\n                }\n\n                {this.state.codigo &&\n                    <h4>Código: {this.state.codigo}</h4>\n                }\n\n                {this.state.producto &&\n                    <div>\n                        <h6>{this.state.producto.producto.nombre}</h6>\n                        <h6>{this.state.producto.producto.marca}</h6>\n                        <h6>Precio mínimo: {this.state.producto.producto.precioMin}</h6>\n                        <h6>Precio máximo: {this.state.producto.producto.precioMax}</h6>\n                    </div>\n                }\n                <Webcam\n                    style={{backgroundColor: '#333', width: '100%', height: '370px', borderRadius: '20px'}}\n                    audio={false}\n                    ref={this.setRef}\n                    screenshotFormat=\"image/jpeg\"\n                    videoConstraints={{\n                        width: 640,\n                        height: 480,\n                        facingMode: { exact: \"environment\" }\n                    }}\n                />\n                <br />\n                <div className=\"clearfix\"></div>\n                <button type=\"button\" className=\"btn btn-primary\" onClick={this.getScreenshot}>Escanear</button>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './index.css';\n// import App from './App';\nimport Scanner from './Scanner';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Scanner />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}