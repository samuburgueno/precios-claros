{"version":3,"sources":["utils/api.js","scanner/containers/quagga.js","scanner/components/scanner-layout.js","scanner/containers/scanner.js","product-search/containers/product-search.js","product-detail/components/product-detail-layout.js","product-detail/containers/product-detail.js","App.js","index.js"],"names":["api","id_producto","fetch","concat","response","data","json","config","state","inputStream","type","constraints","width","min","height","facingMode","aspectRatio","max","locator","patchSize","halfSample","numOfWorkers","frequency","decoder","readers","locate","App","init","self","this","Quagga","err","handleError","start","console","log","onProcessed","result","drawingCtx","canvas","ctx","overlay","drawingCanvas","dom","boxes","clearRect","parseInt","getAttribute","filter","box","forEach","ImageDebug","drawPath","x","y","color","lineWidth","codeResult","code","line","onDetected","setState","codigo","QuaggaScan","props","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","react_default","a","createElement","id","className","Component","ScannerLayout","children","Scanner","setRef","webcam","getScreenshot","bind","assertThisInitialized","dataUri","decodeSingle","src","onSuccess","onFail","error","scanImage","components_scanner_layout","quagga","React","ProductSearch","Api","getProducto","producto","alert","scanner","ProducDetailLayout","alt","nombre","marca","precioMin","precioMax","onClick","nuevoEscaneo","ProductDetail","borrarProducto","product_detail_layout","assign","product_search","containers_product_detail","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.cd2c0020.chunk.js","sourcesContent":["const base_url = 'https://d3e6htiiul5ek9.cloudfront.net';\nconst token = 'array_sucursales=22-1-6,19-1-03296,12-1-97,10-1-268,22-1-16,19-1-00973,12-1-99,22-1-20,19-1-00812,22-1-3,22-1-24,24-1-292,22-1-18,22-1-17,10-1-32,22-1-1,22-1-31,12-1-95,19-1-00983,12-1-165,10-1-33,22-1-26,10-1-41,9-3-5218,19-1-00989,19-1-00959,22-1-5,22-1-11,12-1-96,16-1-1202';\n\nclass Api {\n\tasync getProducto(id_producto) {\n\t\tconst response = await fetch(`${base_url}/prod/producto?limit=30&id_producto=${id_producto}&${token}`)\n\t\tconst data = response.json()\n\t\treturn data;\n\t}\n}\n\nexport default new Api();","import React, { Component } from 'react'\nimport Quagga from 'quagga'\n\nimport './styles.css'\n\n// var resultCollector = Quagga.ResultCollector.create({\n//     capture: true,\n//     capacity: 20,\n//     blacklist: [{\n//         code: \"WIWV8ETQZ1\", format: \"code_93\"\n//     }, {\n//         code: \"EH3C-%GU23RK3\", format: \"code_93\"\n//     }, {\n//         code: \"O308SIHQOXN5SA/PJ\", format: \"code_93\"\n//     }, {\n//         code: \"DG7Q$TV8JQ/EN\", format: \"code_93\"\n//     }, {\n//         code: \"VOFD1DB5A.1F6QU\", format: \"code_93\"\n//     }, {\n//         code: \"4SO64P4X8 U4YUU1T-\", format: \"code_93\"\n//     }],\n//     filter: function(codeResult) {\n//         // only store results which match this constraint\n//         // e.g.: codeResult\n//         return true;\n//     }\n// });\n\nvar config = {\n\tstate: {\n        inputStream: {\n            type : \"LiveStream\",\n            constraints: {\n                width: {min: 640},\n                height: {min: 480},\n                facingMode: \"environment\",\n                aspectRatio: {min: 1, max: 2}\n            }\n        },\n        locator: {\n            patchSize: \"small\",\n            halfSample: true\n        },\n        numOfWorkers: 4,\n        frequency: 10,\n        decoder: {\n            readers: [\"ean_reader\"],\n        },\n        locate: true\n    }\n}\n\nvar App = {\n    init: function() {\n        var self = this;\n\n        Quagga.init(config, function(err) {\n            if (err) {\n                return self.handleError(err);\n            }\n\n            Quagga.start();\n        });\n    },\n    \n    handleError: function(err) {\n        console.log(err);\n    }\n};\n\nQuagga.onProcessed(function(result) {\n    var drawingCtx = Quagga.canvas.ctx.overlay,\n        drawingCanvas = Quagga.canvas.dom.overlay;\n\n    // console.log(result)\n\n    if (result) {\n        if (result.boxes) {\n            drawingCtx.clearRect(0, 0, parseInt(drawingCanvas.getAttribute(\"width\")), parseInt(drawingCanvas.getAttribute(\"height\")));\n            result.boxes.filter(function (box) {\n                return box !== result.box;\n            }).forEach(function (box) {\n                Quagga.ImageDebug.drawPath(box, {x: 0, y: 1}, drawingCtx, {color: \"green\", lineWidth: 2});\n            });\n        }\n\n        if (result.box) {\n            Quagga.ImageDebug.drawPath(result.box, {x: 0, y: 1}, drawingCtx, {color: \"#00F\", lineWidth: 2});\n        }\n\n        if (result.codeResult && result.codeResult.code) {\n            Quagga.ImageDebug.drawPath(result.line, {x: 'x', y: 'y'}, drawingCtx, {color: 'red', lineWidth: 3});\n        }\n    }\n});\n\nQuagga.onDetected(function(result) {\n\t    var code = result.codeResult.code;\n\n\t    this.setState({\n\t    \tcodigo: code\n\t    });\n\n\t    // if (App.lastResult !== code) {\n\t    //     App.lastResult = code;\n\t    //     var $node = null, canvas = Quagga.canvas.dom.image;\n\n\t    //     $node = $('<li><div class=\"thumbnail\"><div class=\"imgWrapper\"><img /></div><div class=\"caption\"><h4 class=\"code\"></h4></div></div></li>');\n\t    //     $node.find(\"img\").attr(\"src\", canvas.toDataURL());\n\t    //     $node.find(\"h4.code\").html(code);\n\t    //     $(\"#result_strip ul.thumbnails\").prepend($node);\n\t    // }\n\t});\n\nclass QuaggaScan extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tcodigo: 0\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tApp.init()\n\t}\n\n\trender() {\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<div id=\"interactive\" className=\"viewport\"></div>\n\t\t\t\t<h1>{this.state.codigo}</h1>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default QuaggaScan","import React from 'react'\n\nimport './scanner-layout.css'\n\nfunction ScannerLayout(props) {\n\treturn(\n\t\t<div className=\"scanner-layout-wrapper text-center\">\n\t\t\t{props.children}\n\t\t</div>\n\t)\n}\n\nexport default ScannerLayout;","import React from 'react';\nimport Quagga from './quagga'\n// import Quagga from 'quagga'\n// import Webcam from \"react-webcam\";\n// import configQuagga from './configQuagga.js';\n\nimport Layout from '../components/scanner-layout'\n\n// var videoConstraints = {}\n// if (process.env === 'development') {\n//     videoConstraints = {\n//         width: {min: 480},\n//         height: {min: 640},\n//         facingMode: \"environment\",\n//         aspectRatio: {min: 1, max: 2}\n//     }\n// } else {\n//     videoConstraints = {\n//         width: 640,\n//         height: 480,\n//         facingMode: \"environment\",\n//     }\n// }\n\nclass Scanner extends React.Component {\n    setRef = webcam => {\n        this.webcam = webcam;\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            codigo: false\n        }\n\n        this.getScreenshot = this.getScreenshot.bind(this)\n    }\n\n    scanImage(dataUri) {\n        Quagga.decodeSingle({\n            decoder: {\n                readers: [\"ean_reader\"],\n            },\n            locate: true,\n            src: dataUri\n        }, function(result) {\n            if(result && result.codeResult) {\n                this.props.onSuccess(result.codeResult.code)\n            } else {\n                this.props.onFail({\n                    error: \"NOT_DECODED\"\n                })\n            }\n        }.bind(this));\n    }\n\n    getScreenshot() {\n        if (this.webcam.getScreenshot()) {\n            this.scanImage(this.webcam.getScreenshot())\n        } else {\n            this.props.onFail({\n                error: \"NOT_CAPTURED\"\n            })\n        }\n    }\n\n    render() {\n        return (\n            <Layout>\n                <Quagga />\n                {/*<Webcam\n                    heigh={640}\n                    width={480}\n                    audio={false}\n                    ref={this.setRef}\n                    screenshotFormat=\"image/jpeg\"\n                    videoConstraints={videoConstraints}\n                />*/}\n                {/*<button type=\"button\" className=\"btn btn-primary\" onClick={this.getScreenshot}>Escanear</button>*/}\n            </Layout>\n        );\n    }\n}\n\nexport default Scanner;","import React, { Component } from 'react';\n\nimport Api from '../../utils/api';\nimport Scanner from '../../scanner/containers/scanner.js';\n\nclass ProductSearch extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.onSuccess = this.onSuccess.bind(this)\n\t\tthis.onFail = this.onFail.bind(this)\n\t}\n\n\tasync onSuccess(id_producto) {\n\t\tconsole.log(id_producto)\n\t\tconst producto = await Api.getProducto(id_producto)\n\t\tthis.props.producto(producto)\n\t}\n\n\tasync onTest() {\n\t\tconst id_producto = 7793433000629\n\t\tconst producto = await Api.getProducto(id_producto)\n\t\tthis.props.producto(producto)\t\n\t}\n\n\tcomponentDidMount() {\n\t\t// this.onTest()\n\t}\n\n\tonFail(error) {\n\t\talert(error.code)\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Scanner \n\t\t\t\tonFail={this.onFail}\n\t\t\t\tonSuccess={this.onSuccess} />\n\t\t);\n\t}\n}\n\nexport default ProductSearch;","import React from 'react';\n\nimport './product-detail.css';\n\nfunction ProducDetailLayout(props) {\n\treturn(\n\t\t<div className=\"product-detail-wrapper\">\n\t\t\t<div className=\"card\">\n\t\t\t\t<img alt={props.producto.nombre} className=\"card-img-top\" src={`https://imagenes.preciosclaros.gob.ar/productos/${props.producto.id}.jpg`} />\n\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t<h5 className=\"card-title\">{props.producto.nombre}</h5>\n\t\t\t\t\t<p className=\"card-text\">{props.producto.marca}</p>\n\t\t\t\t\t<p><small>Precio Minimo</small> <br/>{props.producto.precioMin}</p>\n\t\t\t\t\t<p><small>Precio Máximo</small> <br/>{props.producto.precioMax}</p>\n\t\t\t\t\t<button className=\"btn btn-primary\" onClick={props.nuevoEscaneo}>Escanear otro</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default ProducDetailLayout;","import React, { Component } from 'react';\nimport Layout from '../components/product-detail-layout'\n\nclass ProductDetail extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.nuevoEscaneo = this.nuevoEscaneo.bind(this)\n\t}\n\n\tnuevoEscaneo() {\n\t\tthis.props.borrarProducto()\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Layout \n\t\t\t\tnuevoEscaneo={this.nuevoEscaneo}\n\t\t\t\t{...this.props.producto} \n\t\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ProductDetail;","import React, { Component } from 'react';\n\nimport ProductSearch from './product-search/containers/product-search'\nimport ProductDetail from './product-detail/containers/product-detail'\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tproducto: false\n\t\t}\n\n\t\tthis.producto = this.producto.bind(this)\n\t\tthis.borrarProducto = this.borrarProducto.bind(this)\n\t}\n\n\tproducto(producto) {\n\t\tthis.setState({\n\t\t\tproducto\n\t\t});\n\t}\n\n\tborrarProducto() {\n\t\tthis.setState({\n\t\t\tproducto: false\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t{!this.state.producto &&\n\t\t\t\t\t<ProductSearch \n\t\t\t\t\t\tproducto={this.producto} />\n\t\t\t\t}\n\n\t\t\t\t{this.state.producto &&\n\t\t\t\t\t<ProductDetail \n\t\t\t\t\t\tborrarProducto={this.borrarProducto}\n\t\t\t\t\t\tproducto={this.state.producto} />\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}